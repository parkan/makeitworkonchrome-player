<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Video Generator</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="generate.css">
</head>
<body>
    <!-- Input Section -->
    <div id="input-container" class="container active">
        <div class="content" id="landing-clickable">
            <img src="foucault.png" alt="Michel Foucault" class="landing-portrait">
            <h1 class="landing-title karaoke">The Lives of Infamous Men</h1>
            <p class="karaoke landing-author">(Infinite Version)</p>
        </div>
    </div>

    <!-- Loading Section -->
    <div id="loading-container" class="container">
        <div class="content">
            <div class="loading-animation">
                <img src="foucault.png" alt="Loading" class="spinner-image">
            </div>

            <h2 id="loading-status" class="karaoke-small">Analyzing text...</h2>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>
            <p id="loading-detail" class="loading-detail karaoke-small">Processing your input</p>
        </div>
    </div>

    <!-- Player Section -->
    <div id="player-container" class="container">
        <div class="player-with-minimap">
            <video
                id="video"
                class="video-player"
                muted
            ></video>

            <canvas id="spectrogram" class="spectrogram-canvas" width="1920" height="200"></canvas>

            <div id="mute-indicator" class="mute-indicator" style="display: none;">
                ● click to unmute
            </div>

            <div class="minimap-container">
                <img src="minimap.png" alt="Script minimap" class="minimap-image">
                <div id="minimap-progress" class="minimap-progress-line"></div>
            </div>

            <!-- About Button -->
            <button id="about-btn" class="control-btn about-btn" title="About">?</button>

            <!-- About Overlay -->
            <div id="about-overlay" class="about-overlay">
                <div class="about-content">
                    <button id="about-close-btn" class="about-close-btn" title="Close">&times;</button>

                    <h2 class="about-title">The Lives of Infamous Men</h2>

                    <!-- Project Summary -->
                    <section class="about-section">
                        <h3>About This Project</h3>
                        <p>This is a generative work drawing upon the <a href="https://archive.org/details/tv" class="credits-link" target="_blank" rel="noopener">Internet Archive TV News collections.</a> It interpolates <a href="https://archive.org/details/lives-of-infamous-men" class="credits-link" target="_blank" rel="noopener">Michel Foucault's essay "The Lives of Infamous Men"</a> with talking heads, advertisements, disaster reporting, and other archival footage, each iteration producing a random walk through the past decade of mass media.</p>
                    </section>

                    <!-- Credits -->
                    <section class="about-section">
                        <h3>Credits</h3>
                        <div class="credits-list">
                            <div class="credit-item">
                                <span class="credit-name">Arkadiy Kukarkin</span>
                                <span class="credit-role">Video Programming</span>
                            </div>
                            <div class="credit-item">
                                <span class="credit-name">Sarah Friend</span>
                                <span class="credit-role">Creative Direction, Frontend Development</span>
                            </div>
                        </div>
                        <div class="special-thanks">
                            <h4>Special Thanks</h4>
                            <p>Aaron Ximm, Tracey Jaquith, Wendy Hanamura, Amir Saber, Wade Wallerstein and the rest of the team</p>
                        </div>
                    </section>

                    <!-- Commissioned By -->
                    <section class="about-section about-commissioners">
                        <h3>Commissioned By</h3>
                        <div class="commissioners-container">
                            <a href="https://blog.archive.org/trillion/" target="_blank" rel="noopener noreferrer" class="commissioner-link">
                                <img src="data:image/svg+xml,%3c?xml%20version=%271.0%27%20encoding=%27UTF-8%27?%3e%3csvg%20id=%27Layer_1%27%20data-name=%27Layer%201%27%20xmlns=%27http://www.w3.org/2000/svg%27%20viewBox=%270%200%20800%20840%27%20fill=%27%232c2c2c%27%3e%3cg%3e%3crect%20class=%27cls-1%27%20y=%27801.97%27%20width=%27800%27%20height=%2738.03%27/%3e%3crect%20class=%27cls-1%27%20x=%2725.83%27%20y=%27731.79%27%20width=%27746.78%27%20height=%2752.66%27/%3e%3crect%20class=%27cls-1%27%20x=%2727.02%27%20y=%27184.93%27%20width=%27745.97%27%20height=%2753.84%27/%3e%3cpolygon%20class=%27cls-1%27%20points=%27400%200%206.18%20130.6%2028.8%20166.12%20400%20166.12%20771.2%20166.12%20793.82%20130.6%20400%200%27/%3e%3cg%3e%3cpath%20class=%27cls-1%27%20d=%27M114.92,458.22c-.59-33.58-1.52-67.15-2.92-100.71-1.32-31.61-3.5-63.2-5.15-94.8-.14-2.73-1.38-3.32-3.8-3.81-9.97-2.03-19.98-2.99-30.05-3-10.06.01-20.08.97-30.05,3-2.42.49-3.66,1.08-3.8,3.81-1.64,31.6-3.82,63.19-5.15,94.8-1.41,33.55-2.34,67.13-2.92,100.71-.41,23.79-.16,47.61.25,71.41.44,26.4,1.07,52.81,2.21,79.2,1.23,28.32,3.12,56.61,4.78,84.9.32,5.42.91,10.83,1.37,16.1,11.17,2.72,22.24,4.29,33.31,4.42,11.07-.13,22.14-1.7,33.31-4.42.45-5.27,1.05-10.68,1.36-16.1,1.66-28.3,3.56-56.59,4.78-84.9,1.14-26.38,1.77-52.79,2.21-79.2.4-23.8.66-47.61.24-71.41Z%27/%3e%3cpath%20class=%27cls-1%27%20d=%27M767.34,457.25c-.59-33.58-1.52-67.15-2.92-100.71-1.33-31.61-3.5-63.2-5.15-94.8-.14-2.73-1.38-3.32-3.8-3.81-9.96-2.03-19.98-2.99-30.04-3-10.06.01-20.08.97-30.04,3-2.42.49-3.66,1.08-3.8,3.81-1.64,31.6-3.82,63.19-5.15,94.8-1.41,33.55-2.34,67.13-2.92,100.71-.41,23.79-.16,47.61.25,71.41.45,26.4,1.07,52.81,2.22,79.2,1.23,28.32,3.12,56.61,4.78,84.9.32,5.42.91,10.83,1.36,16.1,11.17,2.72,22.24,4.29,33.31,4.42,11.07-.13,22.14-1.7,33.31-4.42.45-5.27,1.05-10.68,1.36-16.1,1.66-28.3,3.56-56.59,4.78-84.9,1.14-26.38,1.77-52.79,2.21-79.2.4-23.8.66-47.61.25-71.41Z%27/%3e%3c/g%3e%3c/g%3e%3cg%3e%3cpolygon%20class=%27cls-1%27%20points=%27225.8%20255.9%20129.08%20308.12%20129.08%20443.16%20225.8%20390.95%20225.8%20714.26%20344.55%20714.26%20344.55%20255.9%20225.8%20255.9%27/%3e%3cpolygon%20class=%27cls-1%27%20points=%27362.07%20255.9%20362.07%20374.76%20458.79%20374.76%20458.79%20713.28%20577.54%20713.28%20577.54%20374.76%20674.26%20374.76%20674.26%20255.9%20362.07%20255.9%27/%3e%3c/g%3e%3c/svg%3e" alt="Internet Archive" class="commissioner-logo">
                                <span class="commissioner-text">Internet Archive</span>
                            </a>
                            <a href="https://grayarea.org/" target="_blank" rel="noopener noreferrer" class="commissioner-link">
                                <img src="https://villa-albertine.org/wp-content/uploads/2023/08/grayarea-square-text-gray.png" alt="Gray Area" class="commissioner-logo grayarea-logo">
                                <span class="commissioner-text">Gray Area</span>
                            </a>
                        </div>
                    </section>

                    <!-- Clip Sources -->
                    <section class="about-section about-sources">
                        <h3>Source Clips</h3>
                        <p class="sources-intro">This iteration uses the following clips from the Internet Archive:</p>
                        <div id="clip-sources-list" class="clip-sources-list">
                            <p class="loading-sources">Loading clip sources...</p>
                        </div>
                    </section>
                </div>
            </div>

            <div class="custom-controls">
                <button id="play-pause-btn" class="control-btn" title="Play/Pause">
                    <span class="play-icon">▶</span>
                    <span class="pause-icon" style="display: none;">⏸</span>
                </button>
                <button id="fullscreen-btn" class="control-btn" title="Fullscreen">⛶</button>
                <button id="generate-another" class="control-btn" title="Generate Another">↻</button>
            </div>
        </div>
    </div>

    <!-- Error Section -->
    <div id="error-container" class="container">
        <div class="content">
            <h2>Oops! Something went wrong</h2>
            <p id="error-message" class="error-message"></p>
            <button id="try-again" class="primary-btn">Try Again</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="generate.js"></script>
</body>
</html>